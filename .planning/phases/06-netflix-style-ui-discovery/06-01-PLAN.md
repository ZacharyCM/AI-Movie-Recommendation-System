---
phase: 06-netflix-style-ui-discovery
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/app/page.tsx
  - frontend/src/components/home/HeroSection.tsx
  - frontend/src/components/home/FeaturedMovie.tsx
  - frontend/src/hooks/useFeaturedMovie.ts
  - frontend/src/lib/api.ts
  - backend/routers/movies.py
autonomous: true

must_haves:
  truths:
    - "Homepage displays a cinematic hero section with a featured movie's backdrop image filling the viewport"
    - "Hero section shows the featured movie's title, synopsis, and genre tags over the backdrop"
    - "Hero section includes an embedded YouTube trailer or a 'Watch Trailer' button"
    - "Hero section has CTA buttons (Watch Trailer, More Info) that link to the movie detail page"
    - "Homepage layout includes Navbar and is fully responsive across mobile, tablet, and desktop"
  artifacts:
    - path: "frontend/src/app/page.tsx"
      provides: "Homepage with hero section, Navbar, and navigation"
      min_lines: 20
    - path: "frontend/src/components/home/HeroSection.tsx"
      provides: "Cinematic hero with backdrop, gradient overlay, title, synopsis, CTAs"
      min_lines: 60
    - path: "frontend/src/hooks/useFeaturedMovie.ts"
      provides: "TanStack Query hook fetching featured movie data"
      min_lines: 10
    - path: "backend/routers/movies.py"
      provides: "GET /api/movies/featured endpoint"
      exports: ["get_featured_movie"]
  key_links:
    - from: "frontend/src/app/page.tsx"
      to: "frontend/src/components/home/HeroSection.tsx"
      via: "component import"
      pattern: "import.*HeroSection"
    - from: "frontend/src/hooks/useFeaturedMovie.ts"
      to: "/api/movies/featured"
      via: "fetch in TanStack Query"
      pattern: "api/movies/featured"
    - from: "frontend/src/components/home/HeroSection.tsx"
      to: "frontend/src/hooks/useFeaturedMovie.ts"
      via: "hook call"
      pattern: "useFeaturedMovie"
---

<objective>
Build the cinematic homepage hero section that transforms the root page from a placeholder into a premium streaming platform landing experience.

Purpose: REQ-UI-01 requires a Netflix-style hero section. The current root page.tsx is a blank placeholder showing only "NetflixRecs" -- this plan replaces it with a full-bleed cinematic hero featuring a highlighted movie with backdrop image, title overlay, synopsis, trailer embed, and call-to-action buttons.

Output: Working homepage at `/` with a cinematic hero section, responsive layout, and backend endpoint for featured movie data.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@frontend/src/app/page.tsx
@frontend/src/app/layout.tsx
@frontend/src/components/layout/Navbar.tsx
@frontend/src/components/movies/MovieDetail.tsx
@frontend/src/types/movie.ts
@frontend/src/lib/api.ts
@frontend/src/hooks/useRecommendations.ts
@backend/routers/movies.py
@backend/services/tmdb.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Backend featured movie endpoint + frontend API/hook</name>
  <files>
    backend/routers/movies.py
    frontend/src/lib/api.ts
    frontend/src/hooks/useFeaturedMovie.ts
  </files>
  <action>
    1. In `backend/routers/movies.py`, add a new endpoint `GET /api/movies/featured` that:
       - Calls `tmdb_service.get_movie_details()` for a curated featured movie ID
       - Use a small curated list of visually stunning movies (e.g., Inception 27205, Interstellar 157336, The Dark Knight 155, Dune 438631, Spider-Man: Across the Spider-Verse 569094, Oppenheimer 872585) and pick one randomly using `random.choice`
       - Returns full MovieDetailResponse (same schema as /{movie_id} detail endpoint)
       - The endpoint should be registered BEFORE the `/{movie_id}` route to avoid FastAPI routing ambiguity (same pattern used for /search)

    2. In `frontend/src/lib/api.ts`, add:
       ```typescript
       export async function fetchFeaturedMovie(): Promise<MovieDetail> {
         const res = await fetch(`${API_URL}/api/movies/featured`, { cache: "no-store" });
         if (!res.ok) throw new Error(res.statusText);
         return res.json();
       }
       ```
       Import MovieDetail type from @/types/movie at the top.

    3. Create `frontend/src/hooks/useFeaturedMovie.ts`:
       - Export `useFeaturedMovie()` hook using TanStack Query
       - queryKey: ['featured-movie']
       - staleTime: 1000 * 60 * 30 (30 minutes -- don't change featured movie too often)
       - Call fetchFeaturedMovie from @/lib/api
  </action>
  <verify>
    Run `curl http://localhost:8000/api/movies/featured` and confirm it returns a movie detail object with backdrop_path, title, overview, videos, credits, genres.
  </verify>
  <done>Backend endpoint returns a featured movie with full detail data. Frontend hook and API function exist and are typed correctly.</done>
</task>

<task type="auto">
  <name>Task 2: Cinematic hero section component + homepage layout</name>
  <files>
    frontend/src/components/home/HeroSection.tsx
    frontend/src/app/page.tsx
  </files>
  <action>
    1. Create `frontend/src/components/home/HeroSection.tsx` ("use client"):
       - Import useFeaturedMovie hook, framer-motion (motion, AnimatePresence), Next.js Image, Link, getImageUrl, lucide-react icons (Play, Info)
       - Call useFeaturedMovie() to get the featured movie data
       - Loading state: full-viewport skeleton with slate-800 animated pulse (same height as hero)
       - Error/empty state: return null (fail silently)
       - Hero layout:
         * Full-width container, h-[70vh] md:h-[80vh] relative overflow-hidden
         * Backdrop image using Next.js Image with fill + object-cover, priority loading, size "original" from getImageUrl
         * Triple gradient overlay for readability:
           - bg-gradient-to-t from-slate-900 via-slate-900/60 to-transparent (bottom fade)
           - bg-gradient-to-r from-slate-900/80 to-transparent (left fade for text area)
         * Content positioned absolute bottom-0 left-0, with p-8 md:p-16 lg:p-20
         * Movie title: text-4xl md:text-5xl lg:text-6xl font-bold text-white, framer-motion fade-in-up (initial={{ opacity: 0, y: 20 }}, animate={{ opacity: 1, y: 0 }}, transition={{ duration: 0.6 }})
         * Genre tags: flex gap-2, small rounded-full badges (bg-white/20 backdrop-blur-sm text-white text-xs px-3 py-1), use movie.genres array
         * Synopsis: max-w-2xl text-slate-200 text-sm md:text-base line-clamp-3 (use Tailwind line-clamp), framer-motion fade-in with delay 0.3
         * CTA buttons row (flex gap-4 mt-6):
           - "Watch Trailer" button: bg-white text-slate-900 hover:bg-white/90 rounded-lg px-6 py-3 font-semibold flex items-center gap-2 with Play icon. If movie has a YouTube trailer (find in videos.results where site=YouTube and type=Trailer), clicking opens trailer in a modal or scrolls to inline embed. For simplicity, use a state toggle to show/hide an embedded YouTube iframe below the hero. If no trailer found, hide this button.
           - "More Info" button: bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 border border-white/30 rounded-lg px-6 py-3 font-semibold flex items-center gap-2 with Info icon. Links to `/movies/${movie.id}`.
       - Trailer embed section (conditionally rendered below hero when showTrailer state is true):
         * aspect-video max-w-4xl mx-auto px-4 py-8
         * YouTube iframe embed using trailer.key
         * Close button to hide

    2. Replace `frontend/src/app/page.tsx` entirely:
       - "use client" at top
       - Import Navbar from @/components/layout/Navbar
       - Import HeroSection from @/components/home/HeroSection
       - Import Link from next/link
       - Render:
         * Navbar at the top
         * HeroSection component
         * A "Browse All Movies" CTA section below the hero: centered text with a Link to /browse styled as a large button (bg-red-600 hover:bg-red-700 text-white px-8 py-4 rounded-lg text-lg font-semibold)
         * Quick links section below: "Continue to Browse" text link

    Dark mode: All components use slate-900 (#0f172a) backgrounds per locked decision. No light mode considerations.
    Responsive: Hero uses responsive text sizing (text-4xl -> text-6xl), responsive padding, line-clamp for overflow. Mobile gets shorter hero (70vh vs 80vh).
  </action>
  <verify>
    Run `cd /Users/zacharym/netflixrecs/frontend && npx next build` to verify no TypeScript errors. Visually verify at http://localhost:3000 that the hero section renders with backdrop image, title, synopsis, genre tags, and CTA buttons.
  </verify>
  <done>Homepage at `/` displays a cinematic hero section with featured movie backdrop, animated title/synopsis, genre tags, Watch Trailer and More Info CTAs. Layout is responsive and uses dark theme consistently.</done>
</task>

</tasks>

<verification>
- `curl http://localhost:8000/api/movies/featured` returns valid movie detail JSON with backdrop_path, videos, genres
- Homepage at http://localhost:3000/ shows a full-bleed cinematic hero section (not the old placeholder)
- Hero section displays: backdrop image, movie title, genre tags, synopsis, Watch Trailer button, More Info button
- More Info button navigates to /movies/{id} detail page
- Watch Trailer button shows embedded YouTube player (if trailer exists)
- Hero section is responsive: text scales down on mobile, hero height adjusts
- `npx next build` completes without TypeScript errors
</verification>

<success_criteria>
Homepage features a cinematic hero section with a featured movie's backdrop image, title, synopsis, genre tags, and CTA buttons. The hero uses framer-motion fade-in animations, responsive design, and dark theme. A backend endpoint serves the featured movie data.
</success_criteria>

<output>
After completion, create `.planning/phases/06-netflix-style-ui-discovery/06-01-SUMMARY.md`
</output>
